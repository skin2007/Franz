<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Francesco Furlani | Atelier</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <style>
        :root {
            --bg: #F9F9F9;
            --surface: #FFFFFF;
            --text: #1A1A1A;
            --accent: #A67C52;
            --border: #EEEEEE;
            --shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); scroll-behavior: smooth; }

        /* --- NAV --- */
        nav {
            position: fixed; top: 0; width: 100%; height: 70px;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 6%; z-index: 1000; border-bottom: 1px solid var(--border);
        }
        .logo { font-family: 'Playfair Display', serif; font-size: 1.3rem; font-weight: 700; }
        .nav-links a { text-decoration: none; color: var(--text); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; margin-left: 25px; display: none; }

        /* --- HERO --- */
        .hero { padding: 140px 6% 60px; text-align: center; }
        .hero h1 { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 7vw, 4.5rem); line-height: 1.1; margin-bottom: 20px; }
        .hero p { color: #666; max-width: 600px; margin: 0 auto 40px; font-size: 1.1rem; }
        
        /* --- GALLERY GRID --- */
        .gallery-container { padding: 40px 6% 100px; }
        .work-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 30px; 
        }

        /* --- STATUA CARD (Generata da JS) --- */
        .card {
            background: var(--surface); border-radius: 12px; overflow: hidden;
            box-shadow: var(--shadow); transition: transform 0.3s ease; border: 1px solid var(--border);
        }
        .card:hover { transform: translateY(-5px); }
        .card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; background: #eee; }
        .card-content { padding: 20px; }
        .card-content h3 { font-family: 'Playfair Display', serif; margin-bottom: 8px; font-size: 1.2rem; }
        .card-content p { font-size: 0.9rem; color: #777; line-height: 1.4; }

        /* --- STORY --- */
        .story { padding: 80px 6%; background: #111; color: white; display: flex; flex-direction: column; gap: 40px; }
        .story-text h2 { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 20px; }
        .story-img { width: 100%; border-radius: 8px; filter: grayscale(1); }

        /* --- FOOTER --- */
        footer { padding: 40px 6%; text-align: center; border-top: 1px solid var(--border); font-size: 0.8rem; color: #999; }
        .admin-link { margin-top: 20px; display: inline-block; cursor: pointer; text-decoration: underline; }

        /* Mobile */
        @media (min-width: 768px) {
            .nav-links a { display: inline-block; }
            .story { flex-direction: row; align-items: center; padding: 100px 10%; }
            .story-text, .story-img { flex: 1; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo">FRANCESCO FURLANI</div>
        <div class="nav-links">
            <a href="#opere">Opere</a>
            <a href="#storia">Storia</a>
            <a href="/admin/">Admin</a>
        </div>
    </nav>

    <header class="hero">
        <h1>L'Anima nella Materia.</h1>
        <p>Esplora la collezione di sculture fatte a mano da Francesco Furlani. Pezzi unici tra mito e realtà.</p>
    </header>

    <main class="gallery-container" id="opere">
        <div class="work-grid" id="statue-list">
            <p>Caricamento opere...</p>
        </div>
    </main>

    <section class="story" id="storia">
        <div class="story-text">
            <h2>La Genesi</h2>
            <p>Dall'armatura metallica all'ultima sfumatura di colore, ogni opera è un viaggio di settimane. Francesco modella l'argilla per catturare non solo la forma, ma l'essenza stessa del soggetto.</p>
        </div>
        <img src="https://images.unsplash.com/photo-1569437061238-3f658c4f29c1?q=80&w=1000" class="story-img" alt="Work in progress">
    </section>

    <footer>
        <p>© 2026 Francesco Furlani | Atelier di Scultura</p>
        <a href="/admin/" class="admin-link">Area Riservata Artista</a>
    </footer>

    <script>
        // --- FUNZIONE PER CARICARE LE STATUE ---
        async function loadStatues() {
            const listContainer = document.getElementById('statue-list');
            
            try {
                // Cerchiamo il file generato dal CMS
                const response = await fetch('/statue.json');
                if (!response.ok) throw new Error('File non trovato');
                
                const data = await response.json();
                renderStatues(data.statue);
            } catch (err) {
                console.log("Dati non trovati, carico mock-up di esempio...");
                // Se non ci sono dati, carichiamo dei mockup così il sito è bello da subito
                const mockData = [
                    { title: "Esempio Statua 1", image: "https://images.unsplash.com/photo-1554188248-986adbb73be4?w=500", desc: "Argilla polimerica, 2026." },
                    { title: "Esempio Statua 2", image: "https://images.unsplash.com/photo-1549490349-8643362247b5?w=500", desc: "Dettagli in acrilico." },
                    { title: "Esempio Statua 3", image: "https://images.unsplash.com/photo-1578321272176-b7bbc067985c?w=500", desc: "Pezzo unico da collezione." }
                ];
                renderStatues(mockData);
            }
        }

        function renderStatues(items) {
            const listContainer = document.getElementById('statue-list');
            listContainer.innerHTML = items.map(item => `
                <div class="card">
                    <img src="${item.image}" alt="${item.title}">
                    <div class="card-content">
                        <h3>${item.title}</h3>
                        <p>${item.desc || item.body || ''}</p>
                    </div>
                </div>
            `).join('');
        }

        // Avvio
        loadStatues();

        // Supporto per Netlify Identity (permette di chiudere la modale dopo il login)
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.location.href = "/admin/";
                    });
                }
            });
        }
    </script>
</body>
</html>
